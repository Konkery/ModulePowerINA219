function INA219(i2c,options,deviceAddress){this.i2c=i2c,this.options=options,this.deviceAddress=deviceAddress,this.currentLsb=options.maximumExpectedCurrent/32768}var C={I2C_ADDRESS:64,CONFIGURATION_REGISTER:0,SHUNT_VOLTAGE_REGISTER:1,BUS_VOLTAGE_REGISTER:2,POWER_REGISTER:3,CURRENT_REGISTER:4,CALIBRATION_REGISTER:5,RESET_DEVICE:32768,BUS_VOLTAGE_LSB:4,SHUNT_VOLTAGE_LSB:10,POWER_LSB:20};INA219.prototype.readWord=function(address){this.i2c.writeTo(this.deviceAddress,address);const returnData=this.i2c.readFrom(this.deviceAddress,2);return returnData[1]|returnData[0]<<8},INA219.prototype.readSigned=function(address){const data=this.readWord(address);return 32768&data?data-65536:data},INA219.prototype.writeWord=function(address,data){this.i2c.writeTo(this.deviceAddress,[address,data>>8,data])},INA219.prototype.initDevice=function(){const originalRegister=this.readWord(C.CONFIGURATION_REGISTER);this.writeWord(C.CONFIGURATION_REGISTER,C.RESET_DEVICE);const tempRegister=this.readWord(C.CONFIGURATION_REGISTER);if(14751!==tempRegister)throw new Error("Probably not an INA219");const calibration=Math.round(.04096/(this.currentLsb*this.options.rShunt));return this.writeWord(C.CALIBRATION_REGISTER,calibration),{calibrationFactor:calibration}},INA219.prototype.getBusRaw=function(){const raw=this.readWord(C.BUS_VOLTAGE_REGISTER);return raw>>3},INA219.prototype.getBusMilliVolts=function(){const busVoltage=this.getBusRaw();return busVoltage*C.BUS_VOLTAGE_LSB},INA219.prototype.getShuntRaw=function(){const raw=this.readWord(C.SHUNT_VOLTAGE_REGISTER);return raw>>3},INA219.prototype.getShuntMicroVolts=function(){const shuntVoltage=this.getShuntRaw();return shuntVoltage*C.SHUNT_VOLTAGE_LSB},INA219.prototype.getBusMicroAmps=function(){const microAmps=this.readSigned(C.CURRENT_REGISTER);return microAmps*this.currentLsb},INA219.prototype.getBusMicroWatts=function(){const microWatts=this.readSigned(C.POWER_REGISTER);return microWatts*this.currentLsb*C.POWER_LSB},exports.connect=function(i2c,options,deviceAddress){const defaultOptions={maximumExpectedCurrent:3.2768,rShunt:.1};return new INA219(i2c,options||defaultOptions,deviceAddress||64)};