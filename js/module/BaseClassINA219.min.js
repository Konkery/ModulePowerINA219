class BaseClassINA{constructor(bus,address,opts){this._i2c=bus,this._address=address||64,this._opts=opts||{},this.Init()}ReadI2C(reg,bytes){void 0===bytes&&(bytes=2),this._i2c.writeTo(this._address,128|reg);const data=this._i2c.readFrom(this._address,bytes);return data[0]<<8|data[1]}WriteI2C(reg,data){this._i2c.writeTo(this._address,[reg,data>>8,data])}Init(){if(this.WriteI2C(0,32768),14751!==this.ReadI2C(0,2))throw new Error("INA219 not found!");let maxCurrent=this._opts.maxCurrent||3.2768;this._opts.maxCurrent=maxCurrent;let rShunt=this._opts.rShunt||.1;this._opts.rShunt=rShunt,this._opts.currentLSB=3.0517578125*maxCurrent/1e5,this.WriteI2C(5,Math.round(.04096/(this._opts.currentLSB*rShunt)));let config=0,busVoltageRange=this._opts.busVoltageRange||32;this._opts.busVoltageRange=busVoltageRange,32==busVoltageRange&&(config|=8192);let gain=this._opts.gain||8;switch(this._opts.gain=gain,gain){case 2:config|=2048;break;case 4:config|=4096;break;case 8:config|=6144}let busADC=this._opts.busADC||12;switch(this._opts.busADC=busADC,busADC){case 10:config|=128;break;case 11:config|=256;break;case 12:config|=384;break;case 2:config|=1152;break;case 4:config|=1280;break;case 8:config|=1408;break;case 16:config|=1536;break;case 32:config|=1664;break;case 64:config|=1792;break;case 128:config|=1920}let shuntADC=this._opts.shuntADC||12;switch(this._opts.shuntADC=shuntADC,shuntADC){case 10:config|=8;break;case 11:config|=16;break;case 12:config|=24;break;case 2:config|=72;break;case 4:config|=80;break;case 8:config|=88;break;case 16:config|=96;break;case 32:config|=104;break;case 64:config|=112;break;case 128:config|=120}let mode=this._opts.mode||7;this._opts.mode=mode,config|=mode,this.WriteI2C(0,config)}UnsignedToSigned(val){return 32768&val?val-65536:val}GetConfig(){return this._opts}GetShuntVoltage(){return 1e-5*this.UnsignedToSigned(this.ReadI2C(1,2))}GetBusVoltage(){let data=this.ReadI2C(2,2),flags;return 1&(3&data)?-100:.004*(data>>3)}GetPower(){return this.ReadI2C(3,2)*this._opts.currentLSB*20}GetCurrent(){return this.UnsignedToSigned(this.ReadI2C(4,2))*this._opts.currentLSB}}exports=BaseClassINA;